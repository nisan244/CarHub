{% extends "base.html" %}

{% block content %}

<!-- ---------------------------------- -->
<div class="text-center mt-5 mb-4">
    <h3 class="text-white p-2">
        <span class="bg-dark p-2 px-4 m-3 rounded-pill">Welcome back, <span class="text-info">{{ user }}</span></span>
    </h3>
</div>

<!-- ---------------------------------- -->

<div class="d-flex justify-content-center mb-5">
    <div class="card shadow-lg rounded-lg" style="width: 450px; background-color: #f0f8f7;">
        <div class="card-body p-4">
            <h5><b>Name: </b>{{ user.first_name }} {{ user.last_name }}</h5>
            <h5><b>Email: </b>{{ user.email }}</h5>
            <h5><b>Username: </b>{{ user.username }}</h5>

            <div class="d-flex justify-content-end mt-4">
                <a class="btn btn-warning text-dark fw-bold" href="{% url 'edit_profile' %}">Edit Profile</a>
            </div>
        </div>
    </div>
</div>

<!-- ---------------------------------- -->

<div class="text-center mb-4">
    <h3 class="text-dark">Your Purchased Products</h3>
    <p class="text-muted">Here are the products you've purchased from CarHub.</p>
</div>

<!-- ---------------------------------- -->

<div class="d-flex flex-wrap gap-3 m-md-4 justify-content-center">
    {% for purchase in purchases %}
    <div class="card col-sm-12 col-md-3 m-2 mt-4 border border-secondary shadow-lg rounded-lg" style="width: 18rem;">
        <img src="{{ purchase.product.img.url }}" class="card-img-top h-50" alt="Product Image"
            style="object-fit: cover; border-bottom: 2px solid #eee;">
        <div class="card-body p-3">
            <h5 class="card-title text-center"><b>Model:</b> {{purchase.product.name}}</h5>
            <h5 class="card-title text-center"><b>Brand:</b> {{purchase.product.brand}}</h5>
            <hr>
            <h5 class="card-title text-center"><b>${{purchase.product.price}}</b></h5>
            <hr>
            <div class="text-center">
                <a class="btn btn-dark text-white" href="{% url 'all_details' purchase.product.id %}">Details</a>
            </div>
        </div>
    </div>
    {% empty %}
    <p class="text-center w-100 text-muted">No products purchased yet.</p>
    {% endfor %}
</div>

<!-- ---------------------------------- -->

{% endblock content %}